<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Native American Language Archive</title>
    <style>
        /* BASE STYLES */
        * { margin: 0; padding: 0; box-sizing: border-box; }
        /* Pure white background for the entire page */
        body { 
            /* Font is set to Helvetica family as requested */
            font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif; 
            line-height: 1.6; 
            color: #222; 
            background: #fff; 
        }

        /* HEADER & BANNER (SIMPLE LIGHT THEME) */
        header { 
            background: #fff; 
            color: #222; 
            padding: 1.5rem 1rem 0.5rem; 
            text-align: center; 
            /* Subtle border at the bottom of the header */
            border-bottom: 1px solid #eee; 
            position: sticky; /* Sticky header */
            top: 0;
            z-index: 1000;
        }
        header h1 { font-size: 2rem; margin-bottom: 0.25rem; }
        header p { font-size: 0.9rem; font-style: normal; color: #666; }

        /* NAVIGATION (FLAT, HIGH-CONTRAST) */
        nav { 
            background: #fff; 
            /* Subtle border below the navigation */
            border-bottom: 1px solid #eee; 
            padding: 0.25rem 0;
            position: sticky; /* Make nav sticky as well */
            top: 68px; /* Position it right below the header (approx height of header) */
            z-index: 999;
        }
        nav ul { list-style: none; display: flex; flex-wrap: wrap; justify-content: center; }
        nav a { 
            display: block; 
            padding: 0.75rem 1.25rem;
            color: #222; 
            text-decoration: none; 
            font-weight: 500; 
            transition: background 0.2s; 
            cursor: pointer; /* Ensure link areas are clearly clickable */
        }
        nav a:hover { background: #f5f5f5; border-radius: 0; }
        
        /* Dropdowns */
        .dropdown { position: relative; }
        .dropdown-content { 
            display: none; 
            position: absolute; 
            background: #fff; 
            min-width: 200px; 
            border: 1px solid #ddd; 
            box-shadow: 2px 2px 5px rgba(0,0,0,0.05);
            z-index: 1000; 
        }
        /* FIX: Use .show class to force display on click */
        .dropdown:hover .dropdown-content, .dropdown-content.show { 
            display: block; 
        }

        .dropdown-content a { 
            padding: 0.75rem 1rem; 
            /* Subtle lines within the dropdown */
            border-bottom: 1px solid #eee; 
            display: block; 
        }
        .dropdown-content a:last-child { border-bottom: none; }
        .dropdown-content a:hover { background: #f0f0f0; } 
        

        /* SEARCH BAR (MADE STICKY) */
        .search-container { 
            background: #fff; 
            padding: 1rem 1.5rem; 
            /* Subtle border at the bottom of the search bar */
            border-bottom: 1px solid #ddd; 
            position: sticky; 
            /* FIXED: Adjusted position to stick properly below the header and nav */
            top: 115px; 
            z-index: 998;
            box-shadow: none; 
        }
        .search-wrapper { max-width: 1200px; margin: 0 auto; }
        .search-bar { width: 100%; max-width: 800px; margin: 0 auto; position: relative; }
        .search-bar input { 
            width: 100%; 
            padding: 0.75rem 1.5rem; 
            font-size: 1rem; 
            border: 1px solid #ccc; /* Simple, light border */
            border-radius: 4px; 
            transition: all 0.3s; 
        }
        .search-bar input:focus { outline: none; border-color: #222; }
        .search-info { text-align: center; margin-top: 0.5rem; font-size: 0.8rem; color: #666; }

        /* CONTENT SECTIONS */
        .container { 
            max-width: 1000px; 
            margin: 0 auto; 
            padding: 2.5rem 2rem; 
        }
        section { 
            margin-bottom: 3rem; 
            padding: 0; 
            background: #fff; 
            border: none; 
            border-radius: 0; 
            box-shadow: none; 
            /* Add a very subtle line below sections (except the last one in the container) */
            border-bottom: 1px solid #eee;
            padding-bottom: 2rem;
        }
        .container section:last-of-type {
            border-bottom: none;
        }

        section h2 { 
            font-size: 1.8rem; 
            margin-bottom: 1rem; 
            padding-bottom: 0.5rem; 
            /* The subtitle line remains a bit stronger for emphasis */
            border-bottom: 1px solid #ddd; 
            color: #111;
        }
        .hidden { display: none; }

        /* --- NEW STYLES FOR RESOURCE DATA AND MUSEUMS --- */
        /* Table Styles for Resources Section (Addresses missing fields) */
        .resource-table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 1.5rem;
            font-size: 0.9rem;
            table-layout: fixed; /* Ensures column widths are respected */
        }
        .resource-table th, .resource-table td {
            padding: 0.75rem 0.5rem;
            border: 1px solid #eee;
            text-align: left;
            vertical-align: top;
        }
        .resource-table th {
            background: #f8f8f8;
            font-weight: 600;
            color: #444;
            position: sticky;
            top: 159px; /* Sticks below header/nav/search (115px + ~44px search height) */
            z-index: 997;
        }
        .resource-table a {
            word-wrap: break-word;
        }

        /* Museum List Styles (Addresses museum heading and content) */
        .museum-item {
            padding: 1rem 0;
            border-bottom: 1px dashed #ddd;
        }
        .museum-item:last-child {
            border-bottom: none;
        }
        .museum-item h3 {
            margin-bottom: 0.25rem;
            font-size: 1.2rem;
            color: #222;
        }
        .museum-item a {
            color: #007bff;
            text-decoration: none;
        }
        .museum-item a:hover {
            text-decoration: underline;
        }

        /* --- Story List (Padlet Style) --- */
        #storyList { 
            /* This grid layout creates the Padlet-style card arrangement */
            display: grid; 
            grid-template-columns: repeat(auto-fill, minmax(250px, 1fr)); 
            gap: 1.5rem; 
            margin-top: 1.5rem; 
        }
        .story { 
            background: #fcfcfc; 
            padding: 1rem; 
            border: 1px solid #ddd; 
            border-radius: 6px; 
            box-shadow: 0 2px 5px rgba(0,0,0,0.05); 
            position: relative;
            min-height: 150px;
        }
        .story h3 { font-size: 1.2rem; margin-bottom: 0.5rem; }
        .story em { display: block; font-size: 0.85rem; color: #777; margin-bottom: 0.75rem; }
        .story p { font-size: 0.95rem; margin-top: 0; }
        .file-attachment { font-size: 0.8rem; margin-top: 1rem; padding-top: 0.5rem; border-top: 1px solid #eee; }
        .file-attachment a { color: #007bff; text-decoration: none; }

        /* Action Buttons */
        .delete-btn, .edit-btn {
            position: absolute;
            top: 8px;
            padding: 4px 8px;
            font-size: 0.7rem;
            cursor: pointer;
            background: #fff;
            border: 1px solid #ccc;
            border-radius: 3px;
            line-height: 1;
            transition: background 0.2s;
            z-index: 10;
        }
        .delete-btn { right: 8px; color: #dc3545; border-color: #dc3545; }
        .delete-btn:hover { background: #dc3545; color: #fff; }
        .edit-btn { right: 50px; color: #007bff; border-color: #007bff; }
        .edit-btn:hover { background: #007bff; color: #fff; }


        /* FORMS & BUTTONS */
        form { margin-top: 1.5rem; display: flex; flex-direction: column; gap: 0.75rem; }
        form input, form textarea { 
            padding: 0.6rem; 
            border: 1px solid #ccc; 
            border-radius: 4px; 
            font-size: 1rem; 
            background: #fff;
        }
        form button { 
            background: #222; 
            color: #fff; 
            border: none; 
            padding: 0.75rem 1.5rem; 
            border-radius: 4px; 
            cursor: pointer; 
            font-weight: 600; 
            align-self: flex-start;
            transition: background 0.2s;
        }
        form button:hover { background: #444; }

        /* FOOTER */
        footer { 
            background: #f8f8f8; 
            color: #555; 
            text-align: center; 
            padding: 1.5rem 1rem; 
            margin-top: 3rem; 
            /* Subtle border above the footer */
            border-top: 1px solid #eee; 
        }

        /* RESPONSIVE DESIGN */
        @media (max-width: 768px) {
            nav ul { flex-direction: column; }
            nav a { padding: 0.75rem; }
            .search-container { top: 120px; }
        }
    </style>
</head>
<body>
    <header>
        <h1>Native American Language Archive</h1>
        <p>Linking Past, Present and Future Voices</p>
    </header>

    <nav>
        <ul>
            <li><a onclick="showSection('about')">About</a></li>
            <li class="dropdown">
                <a onclick="toggleDropdown(this)">Archive</a>
                <div class="dropdown-content" id="websites-menu"></div>
            </li>
            <li class="dropdown">
                <a onclick="toggleDropdown(this)">Languages</a>
                <div class="dropdown-content" id="books-menu"></div>
            </li>
            <li class="dropdown">
                <a onclick="toggleDropdown(this)">Museums</a>
                <div class="dropdown-content" id="museums-menu"></div>
            </li>
            <li><a onclick="showSection('share')">Share a Story</a></li>
            <li><a onclick="showSection('contact')">Get in touch</a></li>
        </ul>
    </nav>

    <div class="search-container hidden">
        <div class="search-wrapper">
            <div class="search-bar">
                <input type="text" id="globalSearch" placeholder=" Search all resources by title, description, language, publisher, or region...">
            </div>
            <div class="search-info" id="searchInfo">Search across all resources</div>
        </div>
    </div>

    <div class="container">
        <section id="about">
            <h2>About Our Mission</h2>
            <p>Indigenous languages carry the **wisdom, stories and cultural heritage** of communities that have stewarded this land for thousands of years. Yet many of these irreplaceable linguistic treasures face the threat of disappearing forever. Our platform serves as a digital sanctuary where **indigenous communities, linguists and language enthusiasts** can come together to preserve oral traditions and support vital revitalization work.</p>
            <p style="margin-top: 1rem;">Here, you'll find resources for learners, documentation projects led by native speakers and tools to help communities preserve their ancestral languages. We believe every language represents a unique way of understanding the world, and preserving linguistic diversity enriches us all. Whether you're reconnecting with your heritage language, supporting revitalization efforts or exploring how people communicate across cultures, this space honors the voices that have echoed across generations and ensures they continue to thrive.</p>
        </section>

        <section id="resources" class="hidden">
            <h2 id="resource-title">Complete Resource Database</h2>
            <p>Below is the complete list of resources, including **Title, Type, Description, Identifier, Coverage, Language, and Publisher**.</p>
            <div id="resource-list" class="resource-list">
                <table class="resource-table">
                    <thead>
                        <tr>
                            <th style="width: 15%;">Title</th>
                            <th style="width: 8%;">Type</th>
                            <th style="width: 35%;">Description</th>
                            <th style="width: 12%;">Identifier (Link)</th>
                            <th style="width: 8%;">Coverage (Region)</th>
                            <th style="width: 12%;">Language</th>
                            <th style="width: 10%;">Publisher</th>
                        </tr>
                    </thead>
                    <tbody id="resource-table-body">
                        </tbody>
                </table>
            </div>
        </section>
        <section id="museums-list" class="hidden">
            <h2>Native American Museums & Cultural Centers</h2>
            <p>These institutions offer collections, archives, and cultural programming related to Native American languages and history.</p>
            <div id="museum-list-container" class="resource-list">
                </div>
        </section>
        <section id="share" class="hidden">
            <h2>Share a Story</h2>
            <p>Contribute your own story in English or in a Native American language. 
            These stories will become part of our growing archive and are saved in your browser.</p>
            <form id="storyForm">
                <input type="text" id="storyTitle" placeholder="Story Title" required>
                <input type="text" id="storyLanguage" placeholder="Language (e.g. English, Cherokee)" required>
                <textarea id="storyContent" placeholder="Write your story here..." rows="6" required></textarea>
                <input type="file" id="storyFile" accept=".pdf,.doc,.docx,.txt,.jpg,.jpeg,.png,.mp3,.mp4,.wav">
                <label for="storyFile" style="font-size: 0.9rem; color: #666;">Optional: Attach a file (PDF, Word, Text, Image, or Audio)</label>
                <button type="submit">Submit Story</button>
            </form>
            
            <h2 style="margin-top: 3rem;">Community Stories</h2>
            <div id="storyList">
                <p style="padding: 1.5rem 0; grid-column: 1 / -1; text-align: center; color: #666;">No stories added yet. Be the first!</p>
            </div>
        </section>
        <section id="contact" class="hidden">
            <h2>Contact Us</h2>
            <p>Use the form below to send a message to our team. Your message will be drafted in your local email client.</p>
            <form id="contactForm" action="mailto:lefthand.textiles@gmail.com" method="post" enctype="text/plain">
                <input type="text" name="Name" placeholder="Your Name" required>
                <input type="email" name="Email" placeholder="Your Email" required>
                <textarea name="Message" placeholder="Your Message..." rows="6" required></textarea>
                <button type="submit">Send Message</button>
            </form>
        </section>
        </div>

    <footer>
        <p>&copy; 2025 Native American Language Archive | Honoring Indigenous Voices</p>
    </footer>

    <script>
        // --- Resource Data Extracted from Native American Language Database .pdf ---
        const allResources = [
            { title: "Native Languages of the Americas (California Section)", type: "Website", desc: "Small non-profit organization dedicated to Native American language survival through internet technology. Provides accessible vocabulary, cultural background, and pronunciation guides for hundreds of California languages, serving as gateway to specialized materials", identifier: "https://www.native-languages.org/california.htm", coverage: "California", language: "California Languages", publisher: "Native Languages Org" },
            { title: "Cherokee Nation Language Platform", type: "Website", desc: "Cherokee Nation's official online language learning platform offering free Cherokee language classes taught by Ed Fields. Features self-paced courses, interactive learning portal, and comprehensive resources", identifier: "https://cnlearn.cherokee.org/", coverage: "Eastern Woodlands", language: "Cherokee", publisher: "Cherokee Nation" },
            { title: "Shoshoni Language Project", type: "Digital Archive", desc: "Academic language preservation initiative housing Wick R. Miller Collection archive with irreplaceable texts, images, and audio recordings", identifier: "https://shoshoniproject.utah.edu/", coverage: "Great Basin", language: "Shoshoni", publisher: "University of Utah" },
            { title: "Lingit Yoo X'atangi - The Tlingit Language", type: "Website", desc: "Comprehensive Tlingit language learning platform offering lessons, MOOC courses, dictionaries, and community resources", identifier: "https://tlingitlanguage.com/", coverage: "Northwest Coast", language: "Tlingit", publisher: "Community-based" },
            { title: "Hathi Trust Digital Library", type: "Digital Archive", desc: "California Native Collections - Millions of digitized books online including rare materials on California Native languages. Full-view volumes are freely available", identifier: "N/A", coverage: "California", language: "California Languages", publisher: "HathiTrust" },
            { title: "A Grammar of Nakoda (Assiniboine)", type: "Academic Book", desc: "This is the first complete grammatical analysis of Assiniboine language. Provides comprehensive linguistic analysis", identifier: "N/A", coverage: "Great Plains", language: "Assiniboine (Nakoda)", publisher: "Linda A. Cumberland" },
        ];

        // --- Museum Data Extracted from Native American Language Database .pdf snippet ---
        const museums = [
            { name: "Sam Noble Museum", url: "https://samnoblemuseum.ou.edu/collections-and-research/native-american-languages/", coverage: "Great Plains", description: "Extensive Native American Languages Collection with 175+ languages represented through audio/video recordings, manuscripts, books, journals, and teaching curricula" },
            { name: "Museum of Indian Arts and Culture", url: "https://www.newmexicoculture.org/museums/museum-of-indian-arts-culture", coverage: "Southwest", description: "World-renowned museum centering Indigenous perspectives and voices of Pueblo, Navajo (Diné) and Apache cultures of the Southwest" },
            { name: "Heard Museum", url: "https://heard.org/", coverage: "Southwest", description: "Major museum with 12 galleries of American Indian art, over 40,000 items including library and archives with 34,000+ volumes, focus on Southwest Indigenous cultures" },
            { name: "Indian Pueblo Cultural Center", url: "https://indianpueblo.org/", coverage: "Southwest", description: "Gateway to the 19 Pueblos with museum and exhibition galleries featuring Pueblo culture, murals by Pueblo artists, and cultural programs" },
        ];
        
        let editingIndex = null; // State to track which story is being edited

        function renderResources(data) {
            const tableBody = document.getElementById('resource-table-body');
            if (!tableBody) return;

            tableBody.innerHTML = ''; 

            if (data.length === 0) {
                tableBody.innerHTML = '<tr><td colspan="7" style="text-align: center;">No resources match your search criteria.</td></tr>';
                return;
            }

            data.forEach(resource => {
                const row = document.createElement('tr');
                row.innerHTML = `
                    <td><strong>${resource.title}</strong></td>
                    <td>${resource.type}</td>
                    <td>${resource.desc}</td>
                    <td><a href="${resource.identifier}" target="_blank">${resource.identifier === 'N/A' ? 'N/A' : 'Link'}</a></td>
                    <td>${resource.coverage}</td>
                    <td>${resource.language}</td>
                    <td>${resource.publisher}</td>
                `;
                tableBody.appendChild(row);
            });
        }

        function renderMuseums() {
            const museumList = document.getElementById('museum-list-container');
            if (!museumList) return;
            
            museumList.innerHTML = '';
            
            museums.forEach(museum => {
                const item = document.createElement('div');
                item.className = 'museum-item';
                item.innerHTML = `
                    <h3><a href="${museum.url}" target="_blank">${museum.name}</a></h3>
                    <p>${museum.description}</p>
                    <p><strong>Coverage:</strong> ${museum.coverage}</p>
                `;
                museumList.appendChild(item);
            });
        }
        
        function buildMenus() {
            const museumsMenu = document.getElementById('museums-menu');
            if (museumsMenu) {
                museums.forEach(museum => {
                    const a = document.createElement('a');
                    a.href = museum.url;
                    a.textContent = museum.name;
                    a.target = "_blank";
                    museumsMenu.appendChild(a);
                });
            }

            document.getElementById('websites-menu').innerHTML = '<a onclick="showSection(\'resources\')">View All Archive</a>';
            document.getElementById('books-menu').innerHTML = '<a onclick="showSection(\'resources\')">View All Languages</a>';
        }

        function showSection(sectionId) {
            // Hide all sections
            document.querySelectorAll('.container section').forEach(section => {
                section.classList.add('hidden');
            });

            // Show the requested section
            const targetSection = document.getElementById(sectionId);
            if (targetSection) {
                targetSection.classList.remove('hidden');
            }
            
            if (sectionId === 'museums-list') {
                document.getElementById('museums-list').classList.remove('hidden');
            }

            // Show or hide search container based on section
            const searchContainer = document.querySelector('.search-container');
            if (sectionId === 'resources') {
                searchContainer.classList.remove('hidden');
            } else {
                searchContainer.classList.add('hidden');
            }

            // Close all dropdowns
            document.querySelectorAll('.dropdown-content').forEach(content => {
                content.classList.remove('show');
            });
        }

        function toggleDropdown(element) {
            const dropdownContent = element.nextElementSibling;
            
            // Close other open dropdowns
            document.querySelectorAll('.dropdown-content').forEach(content => {
                if (content !== dropdownContent) {
                    content.classList.remove('show');
                }
            });
            
            dropdownContent.classList.toggle('show');
        }

        // --- STORY FUNCTIONALITY (Share, Edit, Delete, Persistence) ---
        
        function renderStories() {
            const storyList = document.getElementById('storyList');
            if (!storyList) return;
            // Retrieve stories from browser's local storage
            const stories = JSON.parse(localStorage.getItem('stories') || '[]');
            storyList.innerHTML = '';
            
            if (stories.length === 0) {
                storyList.innerHTML = '<p style="padding: 1.5rem 0; grid-column: 1 / -1; text-align: center; color: #666;">No stories added yet. Be the first!</p>';
                return;
            }

            stories.forEach((story, index) => {
                const storyDiv = document.createElement('div');
                storyDiv.className = 'story';
                storyDiv.setAttribute('data-index', index);
                
                let fileAttachmentHtml = '';
                if (story.fileName && story.fileData) {
                    fileAttachmentHtml = `
                        <div class="file-attachment">
                            <strong>Attachment:</strong> <a href="${story.fileData}" download="${story.fileName}">${story.fileName}</a>
                        </div>
                    `;
                }
                
                // Padlet-style card with Edit/Delete buttons
                storyDiv.innerHTML = `
                    <button class="delete-btn" onclick="deleteStory(${index})">Delete</button>
                    <button class="edit-btn" onclick="editStory(${index})">Edit</button>
                    <h3>${story.title}</h3>
                    <em>Language: ${story.language}</em>
                    <p>${story.content.replace(/\n/g, '<br>')}</p>
                    ${fileAttachmentHtml}
                `;
                storyList.appendChild(storyDiv);
            });
        }

        function deleteStory(index) {
            if (confirm("Are you sure you want to delete this story? This action cannot be undone.")) {
                const stories = JSON.parse(localStorage.getItem('stories') || '[]');
                stories.splice(index, 1);
                localStorage.setItem('stories', JSON.stringify(stories));
                renderStories();
            }
        }

        function editStory(index) {
            const stories = JSON.parse(localStorage.getItem('stories') || '[]');
            const story = stories[index];
            if (!story) return;

            // Populate form with current story data
            document.getElementById('storyTitle').value = story.title;
            document.getElementById('storyLanguage').value = story.language;
            document.getElementById('storyContent').value = story.content;
            
            // Set editing state and update button text
            editingIndex = index;
            document.getElementById('storyForm').querySelector('button[type="submit"]').textContent = 'Update Story';

            // Scroll to the form for easy editing
            document.getElementById('share').scrollIntoView({ behavior: 'smooth' });
        }


        document.getElementById('storyForm').addEventListener('submit', function(event) {
            event.preventDefault();
            
            const storyTitle = document.getElementById('storyTitle').value;
            const storyLanguage = document.getElementById('storyLanguage').value;
            const storyContent = document.getElementById('storyContent').value;
            const fileInput = document.getElementById('storyFile');

            const newStory = {
                title: storyTitle,
                language: storyLanguage,
                content: storyContent,
                fileName: null,
                fileData: null 
            };
            
            const saveStory = (story) => {
                let stories = JSON.parse(localStorage.getItem('stories') || '[]');
                if (editingIndex !== null) {
                    // Update existing story
                    stories[parseInt(editingIndex)] = story;
                } else {
                    // Add new story
                    stories.push(story);
                }
                
                // Save back to local storage
                localStorage.setItem('stories', JSON.stringify(stories));
                
                // Reset form state
                editingIndex = null; 
                document.getElementById('storyForm').querySelector('button[type="submit"]').textContent = 'Submit Story';
                this.reset();
                renderStories();
            };

            // Handle optional file upload or retaining existing file on edit
            if (fileInput.files.length > 0) {
                const file = fileInput.files[0];
                const reader = new FileReader();
                
                reader.onload = function(event) {
                    newStory.fileName = file.name;
                    newStory.fileData = event.target.result; // Saves file as a base64 string
                    saveStory(newStory);
                };
                
                reader.readAsDataURL(file);
            } else {
                // If editing and no new file is uploaded, retain the old file data
                if (editingIndex !== null) {
                    const stories = JSON.parse(localStorage.getItem('stories') || '[]');
                    const originalStory = stories[parseInt(editingIndex)];
                    if (originalStory && originalStory.fileName) {
                        newStory.fileName = originalStory.fileName;
                        newStory.fileData = originalStory.fileData;
                    }
                }
                saveStory(newStory);
            }
        });


        // --- Initialization ---
        document.addEventListener('DOMContentLoaded', () => {
            buildMenus(); 
            renderResources(allResources);
            renderMuseums();
            renderStories(); // Renders persistent stories on load
            showSection('about');
        });
    </script>
</body>
</html>
