<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Native American Language Archive</title>
  <style>
    * { margin: 0; padding: 0; box-sizing: border-box; }
    body { font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif; line-height: 1.6; color: #222; background: #fafafa; }
    header { background: #222; color: #fff; padding: 2rem 1rem; text-align: center; border-bottom: 4px solid #444; }
    header h1 { font-size: 2.5rem; margin-bottom: 0.5rem; }
    header p { font-size: 1.1rem; font-style: italic; color: #ddd; }
    nav { background: #fff; border-bottom: 1px solid #ddd; padding: 0.5rem 0; position: sticky; top: 0; z-index: 100; }
    nav ul { list-style: none; display: flex; flex-wrap: wrap; justify-content: center; }
    nav a { display: block; padding: 0.75rem 1.5rem; color: #333; text-decoration: none; font-weight: 600; transition: background 0.3s; }
    nav a:hover { background: #f5f5f5; border-radius: 6px; }
    .dropdown-content { display: none; position: absolute; background: #fff; min-width: 220px; border: 1px solid #ddd; border-radius: 6px; box-shadow: 0 4px 10px rgba(0,0,0,0.1); }
    .dropdown-content a { padding: 0.75rem 1rem; border-bottom: 1px solid #eee; }
    .dropdown-content a:last-child { border-bottom: none; }
    .dropdown:hover .dropdown-content { display: block; }
    .container { max-width: 1200px; margin: 0 auto; padding: 2rem 1rem; }
    section { margin-bottom: 3rem; padding: 2rem; background: #fff; border: 1px solid #ddd; border-radius: 12px; box-shadow: 0 2px 6px rgba(0,0,0,0.05); }
    section h2 { font-size: 2rem; margin-bottom: 1rem; padding-bottom: 0.5rem; border-bottom: 2px solid #eee; }
    .hidden { display: none; }
    .about-images { margin-top: 1.5rem; display: grid; grid-template-columns: repeat(auto-fill, minmax(300px, 1fr)); gap: 1rem; }
    .about-images img { width: 100%; border-radius: 10px; box-shadow: 0 2px 6px rgba(0,0,0,0.15); }
    .resource-list { margin-top: 1.5rem; display: grid; grid-template-columns: repeat(auto-fill, minmax(320px, 1fr)); gap: 1.5rem; }
    .resource-item { background: #fdfdfd; padding: 1.5rem; border: 1px solid #ddd; border-radius: 10px; box-shadow: 0 1px 4px rgba(0,0,0,0.05); transition: transform 0.2s; }
    .resource-item:hover { transform: translateY(-3px); box-shadow: 0 4px 12px rgba(0,0,0,0.1); }
    .resource-item h3 { font-size: 1.3rem; margin-bottom: 0.75rem; color: #111; }
    .resource-meta { font-size: 0.9rem; color: #555; margin-bottom: 0.5rem; }
    .resource-item p { margin-bottom: 0.75rem; color: #333; line-height: 1.7; }
    .resource-item a { display: inline-block; margin-top: 0.5rem; color: #0066cc; text-decoration: none; font-weight: 600; }
    .resource-item a:hover { text-decoration: underline; }
    footer { background: #222; color: #fff; text-align: center; padding: 2rem 1rem; margin-top: 3rem; border-top: 4px solid #444; }
    form { margin-top: 1.5rem; display: flex; flex-direction: column; gap: 1rem; }
    form input, form textarea { padding: 0.75rem; border: 1px solid #ccc; border-radius: 8px; font-size: 1rem; }
    form button { background: #0066cc; color: #fff; border: none; padding: 0.75rem; border-radius: 8px; cursor: pointer; font-weight: 600; }
    form button:hover { background: #004999; }
    #storyList { display: grid; grid-template-columns: repeat(auto-fill, minmax(250px, 1fr)); gap: 1rem; margin-top: 2rem; }
    .story { background: #fefefe; padding: 1rem; border: 1px solid #ddd; border-radius: 10px; box-shadow: 0 2px 5px rgba(0,0,0,0.05); word-wrap: break-word; cursor: grab; position: relative; }
    .story.dragging { opacity: 0.5; }
    .story h3 { font-size: 1.2rem; margin-bottom: 0.5rem; }
    .story em { font-size: 0.9rem; color: #555; }
    .delete-btn, .edit-btn { position: absolute; top: 8px; width: 24px; height: 24px; border: none; border-radius: 50%; text-align: center; cursor: pointer; font-size: 0.8rem; line-height: 22px; color: #fff; }
    .delete-btn { right: 8px; background: #e63946; }
    .delete-btn:hover { background: #c1121f; }
    .edit-btn { right: 40px; background: #457b9d; }
    .edit-btn:hover { background: #1d3557; }
    @media (max-width: 768px) { nav ul { flex-direction: column; } nav a { padding: 1rem; } }
  </style>
</head>
<body>
  <header>
    <h1>Native American Language Archive</h1>
    <p>Preserving Voices, Honoring Heritage</p>
  </header>

  <nav>
    <ul>
      <li><a href="#about" onclick="showSection('about')">About</a></li>
      <li class="dropdown"><a href="#websites">Websites/Digital Archives</a><div class="dropdown-content" id="websites-menu"></div></li>
      <li class="dropdown"><a href="#books">Books</a><div class="dropdown-content" id="books-menu"></div></li>
      <li class="dropdown"><a href="#apps">Apps</a><div class="dropdown-content" id="apps-menu"></div></li>
      <li class="dropdown"><a href="#museums">Museums</a><div class="dropdown-content" id="museums-menu"></div></li>
      <li><a href="#share" onclick="showSection('share')">Share a Story</a></li>
    </ul>
  </nav>

  <div class="container">
    <section id="about">
      <h2>About Our Mission</h2>
      <p>Indigenous languages carry wisdom, stories, and cultural heritage of communities that have stewarded this land for thousands of years. Yet many of these irreplaceable linguistic treasures face the threat of disappearing forever. Our platform serves as a digital sanctuary where indigenous communities, linguists, and language enthusiasts can come together to preserve oral traditions and support vital revitalization work.</p>
      <div class="about-images">
        <img src="https://cdn.pixabay.com/photo/2016/11/18/18/36/forest-1834780_1280.jpg" alt="California redwoods (Pixabay)">
        <img src="https://cdn.pixabay.com/photo/2018/06/14/13/28/native-american-3472855_1280.jpg" alt="Cultural preservation (Pixabay)">
        <img src="https://cdn.pixabay.com/photo/2017/05/28/21/13/teepee-2357663_1280.jpg" alt="Great Plains teepee (Pixabay)">
      </div>
    </section>

    <section id="resources" class="hidden">
      <h2 id="resource-title">Resources</h2>
      <div id="resource-list" class="resource-list"></div>
    </section>

    <section id="share" class="hidden">
      <h2>Share a Story</h2>
      <p>Contribute your own story in English or in a Native American language. These stories will become part of our growing archive.</p>
      <form id="storyForm">
        <input type="text" id="storyTitle" placeholder="Story Title" required>
        <input type="text" id="storyLanguage" placeholder="Language (e.g. English, Cherokee)" required>
        <textarea id="storyContent" placeholder="Write your story here..." rows="6" required></textarea>
        <button type="submit">Submit Story</button>
      </form>
      <div id="storyList"></div>
    </section>
  </div>

  <footer>
    <p>&copy; 2025 Native American Language Archive | Honoring Indigenous Voices</p>
  </footer>

  <script>
    const regions = ["california", "eastern", "basin", "northwest", "plateau", "plains"];

    const resources = { websites: {}, books: {}, apps: {}, museums: {} };

    function buildMenus() {
      ["websites", "books", "apps", "museums"].forEach(cat => {
        const menu = document.getElementById(cat + "-menu");
        regions.forEach(region => {
          const a = document.createElement("a");
          a.href = `#${cat}`;
          a.innerText = region.charAt(0).toUpperCase() + region.slice(1).replace(/-/g, ' ');
          a.onclick = () => showResources(cat, region);
          menu.appendChild(a);
        });
      });
    }

    function showSection(id) {
      document.querySelectorAll("section").forEach(sec => sec.classList.add("hidden"));
      document.getElementById(id).classList.remove("hidden");
    }

    function showResources(category, region) {
      showSection('resources');
      const list = document.getElementById("resource-list");
      list.innerHTML = "";
      if (resources[category] && resources[category][region]) {
        resources[category][region].forEach(r => {
          const item = document.createElement("div");
          item.classList.add("resource-item");
          item.innerHTML = `
            <h3>${r.title}</h3>
            <div class="resource-meta"><strong>Type:</strong> ${r.type} | <strong>Coverage:</strong> ${r.coverage}</div>
            <div class="resource-meta"><strong>Language:</strong> ${r.lang} | <strong>Publisher:</strong> ${r.pub}</div>
            <p>${r.desc}</p>
            ${r.identifier ? `<a href="${r.identifier}" target="_blank">Visit Resource</a>` : ""}
          `;
          list.appendChild(item);
        });
      }
    }

    const storyForm = document.getElementById("storyForm");
    const storyList = document.getElementById("storyList");

    function loadStories() {
      const saved = JSON.parse(localStorage.getItem("stories")) || [];
      storyList.innerHTML = "";
      saved.forEach(story => addStoryToDOM(story));
      enableDragDrop();
    }

    function addStoryToDOM(story) {
      const storyDiv = document.createElement("div");
      storyDiv.classList.add("story");
      storyDiv.setAttribute("draggable", "true");
      storyDiv.innerHTML = `
        <button class="edit-btn">✎</button>
        <button class="delete-btn">×</button>
        <h3>${story.title}</h3>
        <p><em>${story.language}</em></p>
        <p>${story.content}</p>
      `;
      storyDiv.querySelector(".delete-btn").addEventListener("click", () => {
        if (confirm("Are you sure you want to delete this story?")) {
          deleteStory(storyDiv);
        }
      });
      storyDiv.querySelector(".edit-btn").addEventListener("click", () => editStory(storyDiv));
      storyList.appendChild(storyDiv);
    }

    storyForm.addEventListener("submit", function(e) {
      e.preventDefault();
      const title = document.getElementById("storyTitle").value;
      const language = document.getElementById("storyLanguage").value;
      const content = document.getElementById("storyContent").value;
      const newStory = {title, language, content};
      const saved = JSON.parse(localStorage.getItem("stories")) || [];
      saved.push(newStory);
      localStorage.setItem("stories", JSON.stringify(saved));
      addStoryToDOM(newStory);
      enableDragDrop();
      storyForm.reset();
    });

    function enableDragDrop() {
      const draggables = document.querySelectorAll(".story");
      const container = document.getElementById("storyList");

      draggables.forEach(draggable => {
        draggable.addEventListener("dragstart", () => {
          draggable.classList.add("dragging");
        });
        draggable.addEventListener("dragend", () => {
          draggable.classList.remove("dragging");
          saveOrder();
        });
      });

      container.addEventListener("dragover", e => {
        e.preventDefault();
        const afterElement = getDragAfterElement(container, e.clientY);
        const dragging = document.querySelector(".dragging");
        if (afterElement == null) {
          container.appendChild(dragging);
        } else {
          container.insertBefore(dragging, afterElement);
        }
      });
    }

    function getDragAfterElement(container, y) {
      const draggableElements = [...container.querySelectorAll(".story:not(.dragging)")];
      return draggableElements.reduce((closest, child) => {
        const box = child.getBoundingClientRect();
        const offset = y - box.top - box.height / 2;
        if (offset < 0 && offset > closest.offset) {
          return { offset: offset, element: child };
        } else {
          return closest;
        }
      }, { offset: Number.NEGATIVE_INFINITY }).element;
    }

    function saveOrder() {
      const stories = [];
      document.querySelectorAll(".story").forEach(storyDiv => {
        const title = storyDiv.querySelector("h3").innerText;
        const language = storyDiv.querySelector("em").innerText;
        const content = storyDiv.querySelectorAll("p")[1].innerText;
        stories.push({title, language, content});
      });
      localStorage.setItem("stories", JSON.stringify(stories));
    }

    function deleteStory(storyDiv) {
      storyDiv.remove();
      saveOrder();
    }

    function editStory(storyDiv) {
      const title = storyDiv.querySelector("h3").innerText;
      const language = storyDiv.querySelector("em").innerText;
      const content = storyDiv.querySelectorAll("p")[1].innerText;

      document.getElementById("storyTitle").value = title;
      document.getElementById("storyLanguage").value = language;
      document.getElementById("storyContent").value = content;

      deleteStory(storyDiv);
      showSection('share');
    }

    buildMenus();
    loadStories();
  </script>
</body>
</html>
